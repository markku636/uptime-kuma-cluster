# Status Page TAB 和分頁修復說明

## 修復的問題
1. **TAB 閃現問題** - TAB 出現後立即消失
2. **分頁不顯示** - 分頁控制器沒有顯示

## 根本原因
- 數據載入時序問題導致 UI 狀態不穩定
- `getData()` 和 `loadStatusPageData()` 之間存在競爭條件
- 缺乏穩定的初始化完成標記

## 修復方案

### 1. 添加 `tabsInitialized` 狀態管理
```javascript
// 在 data() 中添加
tabsInitialized: false,
```

### 2. 改進顯示條件
```vue
<!-- TAB 顯示條件 -->
<div v-if="!enableEditMode && groupTabs && groupTabs.length > 0 && tabsInitialized">

<!-- 分頁顯示條件 -->
<div v-if="!enableEditMode && pagination && pagination.totalPages >= 1 && tabsInitialized">
```

### 3. 優化數據載入流程
- 避免 `getData()` 和 `loadStatusPageData()` 之間的數據衝突
- 確保 TAB 和分頁數據只在完全載入後才顯示
- 添加後備流程處理載入失敗的情況

### 4. 增強調試功能
- 在關鍵點添加 console.log 輸出
- 監控數據載入狀態和 UI 渲染狀態

## 測試步驟

1. 啟動服務器：
   ```bash
   npm start
   ```

2. 訪問狀態頁面：
   ```
   http://localhost:3001/status/full-test-page
   ```

3. 打開瀏覽器開發者工具，檢查 Console 輸出

4. 驗證功能：
   - TAB 穩定顯示，不再閃現
   - 分頁控制器正常顯示
   - TAB 切換功能正常
   - 分頁導航功能正常

## 預期結果

✅ TAB 穩定顯示，包含 "All" 和各 GROUP
✅ 每個 TAB 顯示正確的 monitor 數量
✅ 分頁控制器在底部正常顯示  
✅ TAB 切換會重新載入對應數據
✅ 切換 TAB 時重置到第 1 頁
✅ 分頁導航功能正常工作

## 技術細節

### 修改的文件
- `src/pages/StatusPage.vue`

### 新增的數據屬性
- `tabsInitialized: boolean` - 追蹤 TAB 初始化狀態

### 改進的方法
- `loadStatusPageData()` - 改善數據載入邏輯
- `generateTabsFromData()` - 添加狀態標記設置

### 調試輸出
查看 Console 中的以下訊息：
- "Generated tabs from data:" - 從基礎數據生成 TAB 時
- "Loaded paginated data:" - 載入分頁數據時
