# 重新整理時 TAB 閃現修復測試

## 🔧 修復內容

### 新增 `initialLoadComplete` 狀態
```javascript
// 新增數據屬性
initialLoadComplete: false,
```

### 更新顯示條件
```vue
<!-- 修復前 -->
v-show="!enableEditMode && groupTabs && groupTabs.length > 0 && !loading"

<!-- 修復後 -->
v-show="!enableEditMode && groupTabs && groupTabs.length > 0 && !loading && initialLoadComplete"
```

### 改進初始載入流程
- 使用 `$nextTick` 確保 DOM 更新完成
- 添加 100ms 延遲防止閃現
- 確保所有數據載入完成後才顯示 TAB

## 🧪 測試步驟

### 測試 1: 重新整理頁面
1. 訪問 http://localhost:3001/status/full-test-page
2. **重點測試**：按 F5 或 Ctrl+R 重新整理頁面
3. 觀察 TAB 是否在載入過程中閃現

**預期結果**：
- ✅ TAB 不應該在載入過程中閃現
- ✅ TAB 應該在約 100ms 後穩定出現
- ✅ Console 顯示 "Initial load complete, showing tabs"

### 測試 2: 多次重新整理
1. 連續按 F5 多次重新整理
2. 觀察每次載入的行為

**預期結果**：
- ✅ 每次重新整理都不應該有 TAB 閃現
- ✅ 載入行為一致

### 測試 3: 慢速網路模擬
1. 打開開發者工具 (F12)
2. 切換到 Network 標籤
3. 設置網路速度為 "Slow 3G"
4. 重新整理頁面

**預期結果**：
- ✅ 即使在慢速網路下，TAB 也不應該閃現
- ✅ TAB 在數據載入完成後才顯示

### 測試 4: TAB 切換 (確保不影響)
1. 重新整理頁面等待完全載入
2. 點擊不同的 TAB 進行切換
3. 觀察切換過程中是否有閃現

**預期結果**：
- ✅ TAB 切換過程中不應該有閃現
- ✅ Console 顯示 "Tab switch complete"

## 🔍 調試信息

### 預期的 Console 輸出

```javascript
// 初始載入時
Loaded paginated data: { ... }
Initial load complete, showing tabs

// TAB 切換時
Switching tab from all to [group-id]
Loaded paginated data: { ... }
Tab switch complete
```

### 關鍵時間點
1. **頁面開始載入** - `loading: true`, `initialLoadComplete: false`
2. **數據載入完成** - `loading: false`, `initialLoadComplete: false`
3. **100ms 延遲後** - `initialLoadComplete: true` → TAB 顯示

## 🚨 故障排除

### 如果仍然閃現：
1. 檢查 Console 是否有錯誤
2. 確認 `initialLoadComplete` 值的變化
3. 檢查網路請求時序

### 檢查狀態變化：
```javascript
// 在 Console 中執行
console.log({
  loading: vm.loading,
  initialLoadComplete: vm.initialLoadComplete,
  groupTabs: vm.groupTabs.length,
  enableEditMode: vm.enableEditMode
});
```

## 📊 性能影響

- **延遲時間**: 100ms (用戶幾乎感覺不到)
- **記憶體**: 新增一個 boolean 狀態 (影響極小)
- **CPU**: 一次性 setTimeout (影響極小)

## ✅ 成功標準

✅ **重新整理無閃現** - F5 重新整理時 TAB 不閃現  
✅ **載入穩定** - TAB 在數據準備好後穩定出現  
✅ **切換正常** - TAB 切換功能不受影響  
✅ **性能良好** - 無明顯載入延遲感受  
✅ **調試清楚** - Console 有清楚的載入狀態輸出
